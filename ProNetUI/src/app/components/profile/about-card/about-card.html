<section class="card" aria-labelledby="about-title">
  <header class="card-header entry-editable">
    <h2 id="about-title" class="title">About</h2>
    <button class="edit-btn" aria-label="Edit about" (click)="openEdit()">
      ✎
    </button>
  </header>

  <div class="card-body">
    <p
      class="muted"
      [style.maxHeight]="isExpanded ? 'none' : '4.5em'"
      style="overflow: hidden; text-overflow: ellipsis;"
    >
      {{ aboutText }}
    </p>
    <a
      (click)="isExpanded = !isExpanded"
      style="color: var(--primary); cursor: pointer; font-weight: 600;"
    >
      {{ isExpanded ? 'See less' : 'See more…' }}
    </a>
  </div>
</section>

<!-- Modal (pure HTML/CSS/TS, no libraries) -->
<div
  class="modal-backdrop"
  *ngIf="editVisible"
  (click)="backdropClick($event)"
>
  <div
    class="modal"
    role="dialog"
    aria-modal="true"
    aria-labelledby="about-modal-title"
    (keydown.escape)="cancelEdit()"
    tabindex="-1"
    #modalRoot
  >
    <header class="modal-header">
      <h3 id="about-modal-title">Edit About</h3>
      <button class="icon-btn" aria-label="Close" (click)="cancelEdit()">✕</button>
    </header>

    <div class="modal-body">
      <label class="sr-only" for="about-input">About</label>
      <textarea
        id="about-input"
        #aboutTextarea
        [(ngModel)]="tempAbout"
        rows="8"
        required
        minlength="10"
        maxlength="1000"
        aria-describedby="about-help about-count"
      ></textarea>

      <div class="helper-row">
        <small id="about-help">Min 10 characters. Max 1000.</small>
        <small id="about-count">{{ tempAbout?.length || 0 }} / 1000</small>
      </div>
    </div>

    <footer class="modal-actions">
      <button class="btn btn-secondary" type="button" (click)="cancelEdit()">Cancel</button>
      <button class="btn" type="button"  (click)="saveAbout()">Save</button>
      <!-- <button class="btn" type="button" [disabled]="!canSave()" (click)="saveAbout()">Save</button> -->

    </footer>
  </div>
</div>
